!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}for(var r=n(13),o=i(r),s=n(7),a=i(s),u=n(8),c=i(u),h=n(2),l=i(h),f=n(10),p=n(11),d=n(12),v=null,g=new d.ui,y=document.getElementById("canvas"),m=y.getContext("2d"),w=m.canvas,b=w.width,x=w.height,T=1,I=50,M=[],z=[],_=new o["default"](b,x,50),O=new o["default"](b,x,50),j=function(){return new l["default"]((0+1*Math.random())*b,(0+1*Math.random())*x)},D=function(){return new c["default"](j())},E=function(t,e){T%t===0&&e()},S=function(t,e){t.initializeMap(),t.buildMap(e)},k=0;I>k;k+=1)M.push(new a["default"](j()));var L=function(){for(;z.length<100;)z.push(D());S(_,z),S(O,M);var t=(0,f.energyBounds)(M),e=1e6;E(e,function(){var n=T/e|0;g.setGeneration(n),console.log("generation: "+n+" f: "+t.max/(t.min+.1)),M=(0,f.nBest)(M,I/2|0),M=M.concat((0,f.buildGeneration)(M,j,.3)),M=M.map(function(t){return t.energy=0,t})}),E(g.speed,function(){(0,p.render)(m,M,z,_,t)}),M.forEach(function(t){var e=_.getNeighbors(t.p),n=O.getNeighbors(t.p);t.tick({x:b,y:x},{fBin:e,cBin:n},g.speed>1?2:1)}),z=z.filter(function(t){return!t.marked})},A=function N(t){v||(v=t);for(var e=0;e<g.speed;e++)L(),T++;window.requestAnimationFrame(N)};window.requestAnimationFrame(A)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function n(t,e){this.x=t,this.y=e}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype={set:function(t,e){return this.x=t,this.y=e,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},mul:function(t){return this.x*=t,this.y*=t,this},div:function(t){return!t&&console.log("Division by zero!"),this.x/=t,this.y/=t,this},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var t=this.mag();return t&&this.div(t),this},angle:function(){return Math.atan2(this.y,this.x)},setMag:function(t){var e=this.angle();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this},setAngle:function(t){var e=this.mag();return this.x=e*Math.cos(t),this.y=e*Math.sin(t),this},rotate:function(t){return this.setAngle(this.angle()+t),this},limit:function(t){var e=this.mag();return e>t&&this.setMag(t),this},angleBetween:function(t){return this.angle()-t.angle()},dot:function(t){return this.x*t.x+this.y*t.y},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},wrap:function(t){var e=t.x,n=t.y,i=function(t,e){return(t+e)%e};return this.set(i(this.x,e),i(this.y,n)),this},dist:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},copy:function(){return new n(this.x,this.y)},random:function(){return this.set(1,1),this.setAngle(Math.random()*Math.PI*2),this}},e["default"]=n},function(t,e,n){(function(t){function e(t,e){for(this.size=0|t,this.list=[],this.label=e||null,this.connectedTo=[];t--;){var n=new i;this.list.push(n)}}t&&(t.exports=e);var i=n(5),r=n(4);e.prototype={activate:function(t){var e=[];if("undefined"!=typeof t){if(t.length!=this.size)throw new Error("INPUT size and LAYER size must be the same to activate!");for(var n in this.list){var i=this.list[n],r=i.activate(t[n]);e.push(r)}}else for(var n in this.list){var i=this.list[n],r=i.activate();e.push(r)}return e},propagate:function(t,e){if("undefined"!=typeof e){if(e.length!=this.size)throw new Error("TARGET size and LAYER size must be the same to propagate!");for(var n=this.list.length-1;n>=0;n--){var i=this.list[n];i.propagate(t,e[n])}}else for(var n=this.list.length-1;n>=0;n--){var i=this.list[n];i.propagate(t)}},project:function(t,n,i){if(t instanceof r&&(t=t.layers.input),!(t instanceof e))throw new Error("Invalid argument, you can only project connections to LAYERS and NETWORKS!");return this.connected(t)?void 0:new e.connection(this,t,n,i)},gate:function(t,n){if(n==e.gateType.INPUT){if(t.to.size!=this.size)throw new Error("GATER layer and CONNECTION.TO layer must be the same size in order to gate!");for(var i in t.to.list){var r=t.to.list[i],o=this.list[i];for(var s in r.connections.inputs){var a=r.connections.inputs[s];a.ID in t.connections&&o.gate(a)}}}else if(n==e.gateType.OUTPUT){if(t.from.size!=this.size)throw new Error("GATER layer and CONNECTION.FROM layer must be the same size in order to gate!");for(var i in t.from.list){var r=t.from.list[i],o=this.list[i];for(var u in r.connections.projected){var a=r.connections.projected[u];a.ID in t.connections&&o.gate(a)}}}else if(n==e.gateType.ONE_TO_ONE){if(t.size!=this.size)throw new Error("The number of GATER UNITS must be the same as the number of CONNECTIONS to gate!");for(var i in t.list){var o=this.list[i],a=t.list[i];o.gate(a)}}t.gatedfrom.push({layer:this,type:n})},selfconnected:function(){for(var t in this.list){var e=this.list[t];if(!e.selfconnected())return!1}return!0},connected:function(t){var n=0;for(var i in this.list)for(var r in t.list){var o=this.list[i],s=t.list[r],a=o.connected(s);"projected"==a.type&&n++}if(n==this.size*t.size)return e.connectionType.ALL_TO_ALL;n=0;for(var u in this.list){var o=this.list[u],s=t.list[u],a=o.connected(s);"projected"==a.type&&n++}return n==this.size?e.connectionType.ONE_TO_ONE:void 0},clear:function(){for(var t in this.list){var e=this.list[t];e.clear()}},reset:function(){for(var t in this.list){var e=this.list[t];e.reset()}},neurons:function(){return this.list},add:function(t){this.neurons[t.ID]=t||new i,this.list.push(t),this.size++},set:function(t){t=t||{};for(var e in this.list){var n=this.list[e];t.label&&(n.label=t.label+"_"+n.ID),t.squash&&(n.squash=t.squash),t.bias&&(n.bias=t.bias)}return this}},e.connection=function(t,n,i,r){if(this.ID=e.connection.uid(),this.from=t,this.to=n,this.selfconnection=n==t,this.type=i,this.connections={},this.list=[],this.size=0,this.gatedfrom=[],"undefined"==typeof this.type&&(t==n?this.type=e.connectionType.ONE_TO_ONE:this.type=e.connectionType.ALL_TO_ALL),this.type==e.connectionType.ALL_TO_ALL||this.type==e.connectionType.ALL_TO_ELSE)for(var o in this.from.list)for(var s in this.to.list){var a=this.from.list[o],u=this.to.list[s];if(this.type!=e.connectionType.ALL_TO_ELSE||a!=u){var c=a.project(u,r);this.connections[c.ID]=c,this.size=this.list.push(c)}}else if(this.type==e.connectionType.ONE_TO_ONE)for(var h in this.from.list){var a=this.from.list[h],u=this.to.list[h],c=a.project(u,r);this.connections[c.ID]=c,this.size=this.list.push(c)}t.connectedTo.push(this)},e.connectionType={},e.connectionType.ALL_TO_ALL="ALL TO ALL",e.connectionType.ONE_TO_ONE="ONE TO ONE",e.connectionType.ALL_TO_ELSE="ALL TO ELSE",e.gateType={},e.gateType.INPUT="INPUT",e.gateType.OUTPUT="OUTPUT",e.gateType.ONE_TO_ONE="ONE TO ONE",function(){var t=0;e.connection.uid=function(){return t++}}()}).call(e,n(1)(t))},function(t,e,n){(function(t){function e(t){"undefined"!=typeof t&&(this.layers=t||{input:null,hidden:{},output:null},this.optimized=null)}t&&(t.exports=e);var i=n(5),r=n(3);e.prototype={activate:function(t){if(this.optimized===!1){this.layers.input.activate(t);for(var e in this.layers.hidden)this.layers.hidden[e].activate();return this.layers.output.activate()}return null==this.optimized&&this.optimize(),this.optimized.activate(t)},propagate:function(t,e){if(this.optimized===!1){this.layers.output.propagate(t,e);var n=[];for(var i in this.layers.hidden)n.push(this.layers.hidden[i]);n.reverse();for(var i in n)n[i].propagate(t)}else null==this.optimized&&this.optimize(),this.optimized.propagate(t,e)},project:function(t,n,i){if(this.optimized&&this.optimized.reset(),t instanceof e)return this.layers.output.project(t.layers.input,n,i);if(t instanceof r)return this.layers.output.project(t,n,i);throw new Error("Invalid argument, you can only project connections to LAYERS and NETWORKS!")},gate:function(t,e){this.optimized&&this.optimized.reset(),this.layers.output.gate(t,e)},clear:function(){this.restore();var t=this.layers.input,e=this.layers.output;t.clear();for(var n in this.layers.hidden){var i=this.layers.hidden[n];i.clear()}e.clear(),this.optimized&&this.optimized.reset()},reset:function(){this.restore();var t=this.layers.input,e=this.layers.output;t.reset();for(var n in this.layers.hidden){var i=this.layers.hidden[n];i.reset()}e.reset(),this.optimized&&this.optimized.reset()},optimize:function(){var t=this,e={},n=this.neurons();for(var i in n){for(var r=n[i].neuron,o=n[i].layer;r.neuron;)r=r.neuron;e=r.optimize(e,o)}for(var i in e.propagation_sentences)e.propagation_sentences[i].reverse();e.propagation_sentences.reverse();var s="";s+="var F = Float64Array ? new Float64Array("+e.memory+") : []; ";for(var i in e.variables)s+="F["+e.variables[i].id+"] = "+(e.variables[i].value||0)+"; ";s+="var activate = function(input){\n";for(var i in e.inputs)s+="F["+e.inputs[i]+"] = input["+i+"]; ";for(var a in e.activation_sentences)if(e.activation_sentences[a].length>0)for(var u in e.activation_sentences[a])s+=e.activation_sentences[a][u].join(" "),s+=e.trace_sentences[a][u].join(" ");s+=" var output = []; ";for(var i in e.outputs)s+="output["+i+"] = F["+e.outputs[i]+"]; ";s+="return output; }; ",s+="var propagate = function(rate, target){\n",s+="F["+e.variables.rate.id+"] = rate; ";for(var i in e.targets)s+="F["+e.targets[i]+"] = target["+i+"]; ";for(var a in e.propagation_sentences)for(var u in e.propagation_sentences[a])s+=e.propagation_sentences[a][u].join(" ")+" ";s+=" };\n",s+="var ownership = function(memoryBuffer){\nF = memoryBuffer;\nthis.memory = F;\n};\n",s+="return {\nmemory: F,\nactivate: activate,\npropagate: propagate,\nownership: ownership\n};",s=s.split(";").join(";\n");var c=new Function(s),h=c();h.data={variables:e.variables,activate:e.activation_sentences,propagate:e.propagation_sentences,trace:e.trace_sentences,inputs:e.inputs,outputs:e.outputs,check_activation:this.activate,check_propagation:this.propagate},h.reset=function(){t.optimized&&(t.optimized=null,t.activate=h.data.check_activation,t.propagate=h.data.check_propagation)},this.optimized=h,this.activate=h.activate,this.propagate=h.propagate},restore:function(){if(this.optimized){var t=this.optimized,e=function(){var e=Array.prototype.slice.call(arguments),n=e.shift(),i=e.pop(),r=i+"_";for(var o in e)r+=e[o]+"_";r+=n.ID;var s=t.memory,a=t.data.variables;return r in a?s[a[r].id]:0},n=this.neurons();for(var i in n){for(var r=n[i].neuron;r.neuron;)r=r.neuron;r.state=e(r,"state"),r.old=e(r,"old"),r.activation=e(r,"activation"),r.bias=e(r,"bias");for(var o in r.trace.elegibility)r.trace.elegibility[o]=e(r,"trace","elegibility",o);for(var s in r.trace.extended)for(var o in r.trace.extended[s])r.trace.extended[s][o]=e(r,"trace","extended",s,o)}for(var i in n){for(var r=n[i].neuron;r.neuron;)r=r.neuron;for(var a in r.connections.projected){var u=r.connections.projected[a];u.weight=e(u,"weight"),u.gain=e(u,"gain")}}}},neurons:function(){var t=[],e=this.layers.input.neurons(),n=this.layers.output.neurons();for(var i in e)t.push({neuron:e[i],layer:"input"});for(var r in this.layers.hidden){var o=this.layers.hidden[r].neurons();for(var i in o)t.push({neuron:o[i],layer:r})}for(var i in n)t.push({neuron:n[i],layer:"output"});return t},inputs:function(){return this.layers.input.size},outputs:function(){return this.layers.output.size},set:function(t){this.layers=t,this.optimized&&this.optimized.reset()},setOptimize:function(t){this.restore(),this.optimized&&this.optimized.reset(),this.optimized=t?null:!1},toJSON:function(t){this.restore();var e=this.neurons(),n=[],r=[],o={};for(var s in e){for(var a=e[s].neuron;a.neuron;)a=a.neuron;o[a.ID]=s;var u={trace:{elegibility:{},extended:{}},state:a.state,old:a.old,activation:a.activation,bias:a.bias,layer:e[s].layer};u.squash=a.squash==i.squash.LOGISTIC?"LOGISTIC":a.squash==i.squash.TANH?"TANH":a.squash==i.squash.IDENTITY?"IDENTITY":a.squash==i.squash.HLIM?"HLIM":null,n.push(u)}for(var s in e){for(var a=e[s].neuron;a.neuron;)a=a.neuron;for(var c in a.connections.projected){var h=a.connections.projected[c];r.push({from:o[h.from.ID],to:o[h.to.ID],weight:h.weight,gater:h.gater?o[h.gater.ID]:null})}a.selfconnected()&&r.push({from:o[a.ID],to:o[a.ID],weight:a.selfconnection.weight,gater:a.selfconnection.gater?o[a.selfconnection.gater.ID]:null})}return{neurons:n,connections:r}},toDot:function(t){var e="digraph nn {\n    rankdir = BT\n",n=[this.layers.input].concat(this.layers.hidden,this.layers.output);for(var i in n)for(var r in n[i].connectedTo){var o=n[i].connectedTo[r],s=o.to,a=o.size,u=n.indexOf(n[i]),c=n.indexOf(s);if(t){if(o.gatedfrom.length){var h="fake"+u+"_"+c;e+="    "+h+' [label = "", shape = point, width = 0.01, height = 0.01]\n',e+="    "+u+" -> "+h+" [label = "+a+", arrowhead = none]\n",e+="    "+h+" -> "+c+"\n"}else e+="    "+u+" -> "+c+" [label = "+a+"]\n";for(var l in o.gatedfrom){var f=o.gatedfrom[l].layer,p=(o.gatedfrom[l].type,n.indexOf(f));e+="    "+p+" -> "+h+" [color = blue]\n"}}else{e+="    "+u+" -> "+c+" [label = "+a+"]\n";for(var l in o.gatedfrom){var f=o.gatedfrom[l].layer,p=(o.gatedfrom[l].type,n.indexOf(f));e+="    "+p+" -> "+c+" [color = blue]\n"}}}return e+="}\n",{code:e,link:"https://chart.googleapis.com/chart?chl="+escape(e.replace("/ /g","+"))+"&cht=gv"}},standalone:function(){this.optimized||this.optimize();var t=this.optimized.data,e="function (input) {\n";for(var n in t.inputs)e+="F["+t.inputs[n]+"] = input["+n+"];\n";for(var i in t.activate)for(var r in t.activate[i])e+=t.activate[i][r].join("")+"\n";e+="var output = [];\n";for(var n in t.outputs)e+="output["+n+"] = F["+t.outputs[n]+"];\n";e+="return output;\n}";var o=e.match(/F\[(\d+)\]/g),s=0,a={};for(var u in o){var c=o[u].match(/\d+/)[0];c in a||(a[c]=s++)}var h="F = {\n";for(var n in a)h+=a[n]+": "+this.optimized.memory[n]+",\n";return h=h.substring(0,h.length-2)+"\n};\n",h="var run = "+e.replace(/F\[(\d+)]/g,function(t){return"F["+a[t.match(/\d+/)[0]]+"]"}).replace("{\n","{\n"+h)+";\n",h+="return run",new Function(h)()},worker:function(){this.optimized||this.optimize();var t="var inputs = "+this.optimized.data.inputs.length+";\n";t+="var outputs = "+this.optimized.data.outputs.length+";\n",t+="var F = null;\n",t+="var activate = "+this.optimized.activate.toString()+";\n",t+="var propagate = "+this.optimized.propagate.toString()+";\n",t+="onmessage = function(e){\n",t+="F = e.data.memoryBuffer;\n",t+="if (e.data.action == 'activate'){\n",t+="if (e.data.input.length == inputs){\n",t+="postMessage( { action: 'activate', output: activate(e.data.input), memoryBuffer: F }, [F.buffer]);\n",t+="}\n}\nelse if (e.data.action == 'propagate'){\n",t+="propagate(e.data.rate, e.data.target);\n",t+="postMessage({ action: 'propagate', memoryBuffer: F }, [F.buffer]);\n",t+="}\n}\n";var e=new Blob([t]),n=window.URL.createObjectURL(e);return new Worker(n)},clone:function(){return e.fromJSON(this.toJSON())}},e.fromJSON=function(t){var n=[],o={input:new r,hidden:[],output:new r};for(var s in t.neurons){var a=t.neurons[s],u=new i;u.trace.elegibility={},u.trace.extended={},u.state=a.state,u.old=a.old,u.activation=a.activation,u.bias=a.bias,u.squash=a.squash in i.squash?i.squash[a.squash]:i.squash.LOGISTIC,n.push(u),"input"==a.layer?o.input.add(u):"output"==a.layer?o.output.add(u):("undefined"==typeof o.hidden[a.layer]&&(o.hidden[a.layer]=new r),o.hidden[a.layer].add(u))}for(var s in t.connections){var a=t.connections[s],c=n[a.from],h=n[a.to],l=a.weight,f=n[a.gater],p=c.project(h,l);f&&f.gate(p)}return new e(o)}}).call(e,n(1)(t))},function(t,e,n){(function(t){function e(){this.ID=e.uid(),this.label=null,this.connections={inputs:{},projected:{},gated:{}},this.error={responsibility:0,projected:0,gated:0},this.trace={elegibility:{},extended:{},influences:{}},this.state=0,this.old=0,this.activation=0,this.selfconnection=new e.connection(this,this,0),this.squash=e.squash.LOGISTIC,this.neighboors={},this.bias=2*Math.random()-1}t&&(t.exports=e),e.prototype={activate:function(t){if("undefined"!=typeof t)return this.activation=t,this.derivative=0,this.bias=0,this.activation;this.old=this.state,this.state=this.selfconnection.gain*this.selfconnection.weight*this.state+this.bias;for(var e in this.connections.inputs){var t=this.connections.inputs[e];this.state+=t.from.activation*t.weight*t.gain}this.activation=this.squash(this.state),this.derivative=this.squash(this.state,!0);var n=[];for(var i in this.trace.extended){var r=this.trace.extended[i],o=this.neighboors[i],s=o.selfconnection.gater==this?o.old:0;for(var a in this.trace.influences[o.ID])s+=this.trace.influences[o.ID][a].weight*this.trace.influences[o.ID][a].from.activation;n[o.ID]=s}for(var e in this.connections.inputs){var t=this.connections.inputs[e];this.trace.elegibility[t.ID]=this.selfconnection.gain*this.selfconnection.weight*this.trace.elegibility[t.ID]+t.gain*t.from.activation;for(var i in this.trace.extended){var r=this.trace.extended[i],o=this.neighboors[i],s=n[o.ID];r[t.ID]=o.selfconnection.gain*o.selfconnection.weight*r[t.ID]+this.derivative*this.trace.elegibility[t.ID]*s}}for(var u in this.connections.gated)this.connections.gated[u].gain=this.activation;return this.activation},propagate:function(t,e){var n=0,i="undefined"!=typeof e;if(i)this.error.responsibility=this.error.projected=e-this.activation;else{for(var r in this.connections.projected){var o=this.connections.projected[r],s=o.to;n+=s.error.responsibility*o.gain*o.weight}this.error.projected=this.derivative*n,n=0;for(var r in this.trace.extended){var s=this.neighboors[r],a=s.selfconnection.gater==this?s.old:0;for(var u in this.trace.influences[r])a+=this.trace.influences[r][u].weight*this.trace.influences[s.ID][u].from.activation;n+=s.error.responsibility*a}this.error.gated=this.derivative*n,this.error.responsibility=this.error.projected+this.error.gated}t=t||.1;for(var r in this.connections.inputs){var u=this.connections.inputs[r],c=this.error.projected*this.trace.elegibility[u.ID];for(var r in this.trace.extended){var s=this.neighboors[r];c+=s.error.responsibility*this.trace.extended[s.ID][u.ID]}u.weight+=t*c}this.bias+=t*this.error.responsibility},project:function(t,n){if(t==this)return this.selfconnection.weight=1,this.selfconnection;var i=this.connected(t);if(i&&"projected"==i.type)return"undefined"!=typeof n&&(i.connection.weight=n),i.connection;var r=new e.connection(this,t,n);this.connections.projected[r.ID]=r,this.neighboors[t.ID]=t,t.connections.inputs[r.ID]=r,t.trace.elegibility[r.ID]=0;for(var o in t.trace.extended){var s=t.trace.extended[o];s[r.ID]=0}return r},gate:function(t){this.connections.gated[t.ID]=t;var e=t.to;if(!(e.ID in this.trace.extended)){this.neighboors[e.ID]=e;var n=this.trace.extended[e.ID]={};for(var i in this.connections.inputs){var r=this.connections.inputs[i];n[r.ID]=0}}e.ID in this.trace.influences?this.trace.influences[e.ID].push(t):this.trace.influences[e.ID]=[t],t.gater=this},selfconnected:function(){return 0!==this.selfconnection.weight},connected:function(t){var e={type:null,connection:!1};if(this==t)return this.selfconnected()?(e.type="selfconnection",e.connection=this.selfconnection,e):!1;for(var n in this.connections)for(var i in this.connections[n]){var i=this.connections[n][i];if(i.to==t)return e.type=n,e.connection=i,e;if(i.from==t)return e.type=n,e.connection=i,e}return!1},clear:function(){for(var t in this.trace.elegibility)this.trace.elegibility[t]=0;for(var t in this.trace.extended)for(var e in this.trace.extended[t])this.trace.extended[t][e]=0;this.error.responsibility=this.error.projected=this.error.gated=0},reset:function(){this.clear();for(var t in this.connections)for(var e in this.connections[t])this.connections[t][e].weight=2*Math.random()-1;this.bias=2*Math.random()-1,this.old=this.state=this.activation=0},optimize:function(t,n){t=t||{};var i=[],r=[],o=[],s=t.memory||0,a=t.neurons||1,u=t.inputs||[],c=t.targets||[],h=t.outputs||[],l=t.variables||{},f=t.activation_sentences||[],p=t.trace_sentences||[],d=t.propagation_sentences||[],v=t.layers||{__count:0,__neuron:0},g=function(t){var e=n in v&&t[v.__count];e||(v.__count=t.push([])-1,v[n]=v.__count)};g(f),g(p),g(d);var y=v.__count,m=function(){var t=Array.prototype.slice.call(arguments);if(1==t.length){if("target"==t[0]){var e="target_"+c.length;c.push(s)}else var e=t[0];return e in l?l[e]:l[e]={value:0,id:s++}}var n=t.length>2;if(n)var i=t.pop();var r=t.shift(),o=t.pop();if(!n)var i=r[o];var e=o+"_";for(var a in t)e+=t[a]+"_";return e+=r.ID,e in l?l[e]:l[e]={value:i,id:s++}},w=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),n="";for(var i in t)n+="string"==typeof t[i]?t[i]:"F["+t[i].id+"]";e.push(n+";")},b=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},x=b(this.connections.projected),T=b(this.connections.gated),I="input"==n?!0:b(this.connections.inputs),M="output"==n?!0:x&&T,z=m("rate"),_=m(this,"activation");if(I)u.push(_.id);else{f[y].push(i),p[y].push(r),d[y].push(o);var O=m(this,"old"),j=m(this,"state"),D=m(this,"bias");if(this.selfconnection.gater)var E=m(this.selfconnection,"gain");if(this.selfconnected())var S=m(this.selfconnection,"weight");w(O," = ",j,i),this.selfconnected()?this.selfconnection.gater?w(j," = ",E," * ",S," * ",j," + ",D,i):w(j," = ",S," * ",j," + ",D,i):w(j," = ",D,i);for(var k in this.connections.inputs){var L=this.connections.inputs[k],A=m(L.from,"activation"),N=m(L,"weight");if(L.gater)var q=m(L,"gain");this.connections.inputs[k].gater?w(j," += ",A," * ",N," * ",q,i):w(j," += ",A," * ",N,i)}var P=m(this,"derivative");switch(this.squash){case e.squash.LOGISTIC:w(_," = (1 / (1 + Math.exp(-",j,")))",i),w(P," = ",_," * (1 - ",_,")",i);break;case e.squash.TANH:var B=m("aux"),C=m("aux_2");w(B," = Math.exp(",j,")",i),w(C," = 1 / ",B,i),w(_," = (",B," - ",C,") / (",B," + ",C,")",i),w(P," = 1 - (",_," * ",_,")",i);break;case e.squash.IDENTITY:w(_," = ",j,i),w(P," = 1",i);break;case e.squash.HLIM:w(_," = +(",j," > 0)",i),w(P," = 1",i);case e.squash.RELU:w(_," = ",j," > 0 ? ",j," : 0",i),w(P," = ",j," > 0 ? 1 : 0",i)}for(var G in this.trace.extended){var F=this.trace.extended[G],R=this.neighboors[G],H=m("influences["+R.ID+"]"),U=m(R,"old"),Y=!1;R.selfconnection.gater==this&&(w(H," = ",U,r),Y=!0);for(var V in this.trace.influences[R.ID]){var W=m(this.trace.influences[R.ID][V],"weight"),X=m(this.trace.influences[R.ID][V].from,"activation");Y?w(H," += ",W," * ",X,r):(w(H," = ",W," * ",X,r),Y=!0)}}for(var k in this.connections.inputs){var L=this.connections.inputs[k];if(L.gater)var q=m(L,"gain");var A=m(L.from,"activation"),Q=m(this,"trace","elegibility",L.ID,this.trace.elegibility[L.ID]);this.selfconnected()?this.selfconnection.gater?L.gater?w(Q," = ",E," * ",S," * ",Q," + ",q," * ",A,r):w(Q," = ",E," * ",S," * ",Q," + ",A,r):L.gater?w(Q," = ",S," * ",Q," + ",q," * ",A,r):w(Q," = ",S," * ",Q," + ",A,r):L.gater?w(Q," = ",q," * ",A,r):w(Q," = ",A,r);for(var G in this.trace.extended){var F=this.trace.extended[G],R=this.neighboors[G],H=m("influences["+R.ID+"]"),U=m(R,"old"),Q=m(this,"trace","elegibility",L.ID,this.trace.elegibility[L.ID]),F=m(this,"trace","extended",R.ID,L.ID,this.trace.extended[R.ID][L.ID]);if(R.selfconnected())var J=m(R.selfconnection,"weight");if(R.selfconnection.gater)var K=m(R.selfconnection,"gain");R.selfconnected()?R.selfconnection.gater?w(F," = ",K," * ",J," * ",F," + ",P," * ",Q," * ",H,r):w(F," = ",J," * ",F," + ",P," * ",Q," * ",H,r):w(F," = ",P," * ",Q," * ",H,r)}}for(var Z in this.connections.gated){var $=m(this.connections.gated[Z],"gain");w($," = ",_,i)}}if(!I){var tt=m(this,"error","responsibility",this.error.responsibility);if(M){var et=m("target");w(tt," = ",et," - ",_,o);for(var G in this.connections.inputs){var L=this.connections.inputs[G],Q=m(this,"trace","elegibility",L.ID,this.trace.elegibility[L.ID]),N=m(L,"weight");w(N," += ",z," * (",tt," * ",Q,")",o)}h.push(_.id)}else if(x||T){if(T){w(tt," = 0",o);for(var G in this.connections.projected){var Z=this.connections.projected[G],R=Z.to,nt=m(Z,"weight"),it=m(R,"error","responsibility",R.error.responsibility);if(Z.gater){var rt=m(Z,"gain");w(tt," += ",it," * ",rt," * ",nt,o)}else w(tt," += ",it," * ",nt,o)}w(tt," *= ",P,o);for(var G in this.connections.inputs){var L=this.connections.inputs[G],Q=m(this,"trace","elegibility",L.ID,this.trace.elegibility[L.ID]),N=m(L,"weight");w(N," += ",z," * (",tt," * ",Q,")",o)}}else if(x){w(tt," = 0",o);for(var G in this.trace.extended){var R=this.neighboors[G],H=m("aux"),U=m(R,"old");R.selfconnection.gater==this?w(H," = ",U,o):w(H," = 0",o);for(var L in this.trace.influences[R.ID]){var Z=this.trace.influences[R.ID][L],nt=m(Z,"weight"),ot=m(Z.from,"activation");w(H," += ",nt," * ",ot,o)}var it=m(R,"error","responsibility",R.error.responsibility);w(tt," += ",it," * ",H,o)}w(tt," *= ",P,o);for(var G in this.connections.inputs){var L=this.connections.inputs[G],st=m("aux");w(st," = 0",o);for(var G in this.trace.extended){var R=this.neighboors[G],it=m(R,"error","responsibility",R.error.responsibility),F=m(this,"trace","extended",R.ID,L.ID,this.trace.extended[R.ID][L.ID]);w(st," += ",it," * ",F,o)}var N=m(L,"weight");w(N," += ",z," * ",st,o)}}}else{var at=m("aux");for(var G in this.connections.projected){var Z=this.connections.projected[G],R=Z.to,nt=m(Z,"weight"),it=m(R,"error","responsibility",R.error.responsibility);if(Z.gater){var rt=m(Z,"gain");w(at," += ",it," * ",rt," * ",nt,o)}else w(at," += ",it," * ",nt,o)}var ut=m(this,"error","projected",this.error.projected);w(ut," = ",P," * ",at,o),w(at," = 0",o);for(var G in this.trace.extended){var R=this.neighboors[G],H=m("aux_2"),U=m(R,"old");R.selfconnection.gater==this?w(H," = ",U,o):w(H," = 0",o);for(var L in this.trace.influences[R.ID]){var Z=this.trace.influences[R.ID][L],nt=m(Z,"weight"),ot=m(Z.from,"activation");w(H," += ",nt," * ",ot,o)}var it=m(R,"error","responsibility",R.error.responsibility);w(at," += ",it," * ",H,o)}var ct=m(this,"error","gated",this.error.gated);w(ct," = ",P," * ",at,o),w(tt," = ",ut," + ",ct,o);for(var G in this.connections.inputs){var L=this.connections.inputs[G],st=m("aux"),Q=m(this,"trace","elegibility",L.ID,this.trace.elegibility[L.ID]);w(st," = ",ut," * ",Q,o);for(var G in this.trace.extended){var R=this.neighboors[G],it=m(R,"error","responsibility",R.error.responsibility),F=m(this,"trace","extended",R.ID,L.ID,this.trace.extended[R.ID][L.ID]);w(st," += ",it," * ",F,o)}var N=m(L,"weight");w(N," += ",z," * ",st,o)}}w(D," += ",z," * ",tt,o)}return{memory:s,neurons:a+1,inputs:u,outputs:h,targets:c,variables:l,activation_sentences:f,trace_sentences:p,propagation_sentences:d,layers:v}}},e.connection=function(t,n,i){if(!t||!n)throw new Error("Connection Error: Invalid neurons");this.ID=e.connection.uid(),this.from=t,this.to=n,this.weight="undefined"==typeof i?2*Math.random()-1:i,this.gain=1,this.gater=null},e.squash={},e.squash.LOGISTIC=function(t,n){if(!n)return 1/(1+Math.exp(-t));var i=e.squash.LOGISTIC(t);return i*(1-i)},e.squash.TANH=function(t,n){if(n)return 1-Math.pow(e.squash.TANH(t),2);var i=Math.exp(t),r=1/i;return(i-r)/(i+r)},e.squash.IDENTITY=function(t,e){return e?1:t},e.squash.HLIM=function(t,e){return e?1:t>0?1:0},e.squash.RELU=function(t,e){return e?t>0?1:0:t>0?t:0},function(){var t=0,n=0;e.uid=function(){return t++},e.connection.uid=function(){return n++},e.quantity=function(){return{neurons:t,connections:n}}}()}).call(e,n(1)(t))},function(t,e,n){var i,r,o={Neuron:n(5),Layer:n(3),Network:n(4),Trainer:n(9),Architect:n(15)};i=[],r=function(){return o}.apply(e,i),!(void 0!==r&&(t.exports=r)),"undefined"!=typeof t&&t.exports&&(t.exports=o),"object"==typeof window&&(!function(){var t=window.synaptic;o.ninja=function(){return window.synaptic=t,o}}(),window.synaptic=o)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Creature=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=i(s),u=n(6),c=i(u),h=n(8),l=i(h),f=function(){function t(e){r(this,t),this.p=e,this.v=(new a["default"]).random(),this.network=new c["default"].Architect.Perceptron(11,24,24,2),this.energy=0,this.radius=6,this.hue=0,this.setColor()}return o(t,[{key:"tick",value:function(t,e,n){var i=e.fBin,r=e.cBin,o=this.getInputs({fBin:i,cBin:r}),s=this.activate(o);this.move(s,n),this.p.wrap(t),this.eat(i)}},{key:"eat",value:function(t){var e=this;t.length;new a["default"];t.forEach(function(t){t instanceof l["default"]&&e.p.dist(t.p)<e.radius&&(t.marked=!0,e.energy+=1)})}},{key:"getInputs",value:function(t){var e=t.fBin,n=t.cBin,i=this.getFoodInputs(e);return Object.assign(i,this.getCreatureInputs(n)),i}},{key:"getCreatureInputs",value:function(t){var e=this;if(t.length<2)return{c1p:new a["default"](0,0),c1v:new a["default"](0,0),c1d:1};var n=t.filter(function(t){return t!==e}),i=n.reduce(function(t,n){return e.p.dist(n.p)<e.p.dist(t.p)?n:t});return{c1p:i.p.copy().sub(this.p).normalize(),c1v:i.v.copy().normalize(),c1d:i.p.mag()/100}}},{key:"getFoodInputs",value:function(t){var e=this;if(0===t.length)return{COM:new a["default"](0,0),f1:new a["default"](0,0),f1d:1};var n=t[0].p.copy(),i=t.reduce(function(t,i){return t.add(i.p),e.p.dist(i.p)<e.p.dist(n)&&(n=i.p.copy()),t},new a["default"](0,0));return{COM:i.div(t.length).sub(this.p).normalize(),f1:n.copy().sub(this.p).normalize(),f1d:n.copy().mag()/100}}},{key:"activate",value:function(t){var e=[];e.push(t.COM.x),e.push(t.COM.y),e.push(t.f1.x),e.push(t.f1.y),e.push(t.f1d),e.push(t.c1p.x),e.push(t.c1p.y),e.push(t.c1v.x),e.push(t.c1v.y),e.push(t.c1d),e=e.map(function(t){return(t+1)/2}),e.push(Math.random());var n=this.network.activate(e);return new a["default"](n[0]-.5,n[1]-.5).normalize()}},{key:"move",value:function(t,e){var n=t.normalize();n.div(2),this.v.add(n),this.v.normalize(),this.p.add(this.v.copy().mul(e))}},{key:"getGenome",value:function(){var t=[];return this.network.neurons().forEach(function(e){for(var n in e.neuron.connections)if("projected"===n){var i=e.neuron.connections[n];for(var r in i){var o=i[r].weight;t.push(o)}}"input"!==e.layer&&t.push(e.neuron.selfconnection.weight)}),t}},{key:"setGenome",value:function(t){var t=t.slice(0);this.network.neurons().forEach(function(e){for(var n in e.neuron.connections)if("projected"===n){var i=e.neuron.connections[n];for(var r in i){var o=i[r],s=t.shift();o.weight=s}}"input"!==e.layer&&(e.neuron.selfconnection.weight=t.shift())}),this.setColor()}},{key:"setColor",value:function(){var t=this.getGenome().reduce(function(t,e,n){return t+Math.pow(1.01,n)*e},0);this.hue=t/500|0}},{key:"angle",get:function(){return this.v.angle()}}]),t}();e.Creature=f,e["default"]=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.food=void 0;var o=n(2),s=(i(o),function a(t){r(this,a),this.p=t,this.marked=!1});e.food=s,e["default"]=s},function(t,e,n){(function(t){function e(t,e){e=e||{},this.network=t,this.rate=e.rate||.2,this.iterations=e.iterations||1e5,this.error=e.error||.005,this.cost=e.cost||null,this.crossValidate=e.crossValidate||null}t&&(t.exports=e),e.prototype={train:function(t,n){function i(t){for(var e,n,i=t.length;i;e=Math.floor(Math.random()*i),n=t[--i],t[i]=t[e],t[e]=n);return t}var r,o,s,a=1,u=bucketSize=0,c=!1,h=n&&n.cost||this.cost||e.cost.MSE,l=!1,f=Date.now();if(n&&(n.shuffle,n.iterations&&(this.iterations=n.iterations),n.error&&(this.error=n.error),n.rate&&(this.rate=n.rate),n.cost&&(this.cost=n.cost),n.schedule&&(this.schedule=n.schedule),n.customLog&&(console.log("Deprecated: use schedule instead of customLog"),
this.schedule=n.customLog),this.crossValidate&&(l=!0,n.crossValidate.testSize&&(this.crossValidate.testSize=n.crossValidate.testSize),n.crossValidate.testError&&(this.crossValidate.testError=n.crossValidate.testError))),r=this.rate,Array.isArray(this.rate)&&(bucketSize=Math.floor(this.iterations/this.rate.length)),l){var p=Math.ceil((1-this.crossValidate.testSize)*t.length);s=t.slice(0,p),o=t.slice(p)}for(;!c&&u<this.iterations&&a>this.error&&!(l&&a<=this.crossValidate.testError);){var d=t.length;if(a=0,bucketSize>0){var v=Math.floor(u/bucketSize);r=this.rate[v]||r}l?(this._trainSet(s,r,h),a+=this.test(o).error,d=1):(a+=this._trainSet(t,r,h),d=t.length),u++,a/=d,n&&(this.schedule&&this.schedule.every&&u%this.schedule.every==0?c=this.schedule["do"]({error:a,iterations:u,rate:r}):n.log&&u%n.log==0&&console.log("iterations",u,"error",a,"rate",r),n.shuffle&&i(t))}var g={error:a,iterations:u,time:Date.now()-f};return g},_trainSet:function(t,e,n){var i=0;for(var r in t)input=t[r].input,target=t[r].output,output=this.network.activate(input),this.network.propagate(e,target),i+=n(target,output);return i},test:function(t,n){var i,r,o,s=0,a=n&&n.cost||this.cost||e.cost.MSE,u=Date.now();for(var c in t)i=t[c].input,o=t[c].output,r=this.network.activate(i),s+=a(o,r);s/=t.length;var h={error:s,time:Date.now()-u};return h},workerTrain:function(t,n,i){function r(t){for(var e,n,i=t.length;i;e=Math.floor(Math.random()*i),n=t[--i],t[i]=t[e],t[e]=n);return t}function o(t){v.postMessage({action:"activate",input:t,memoryBuffer:u.network.optimized.memory},[u.network.optimized.memory.buffer])}function s(t){if(bucketSize>0){var e=Math.floor(h/bucketSize);a=u.rate[e]||a}v.postMessage({action:"propagate",target:t,rate:a,memoryBuffer:u.network.optimized.memory},[u.network.optimized.memory.buffer])}var a,u=this,c=1,h=bucketSize=0,l=t.length,f=!1,p=i&&i.cost||u.cost||e.cost.MSE,d=Date.now();i&&(i.shuffle,i.iterations&&(u.iterations=i.iterations),i.error&&(u.error=i.error),i.rate&&(u.rate=i.rate),i.cost&&(u.cost=i.cost),i.schedule&&(u.schedule=i.schedule),i.customLog&&(console.log("Deprecated: use schedule instead of customLog"),u.schedule=i.customLog)),a=u.rate,Array.isArray(u.rate)&&(bucketSize=Math.floor(u.iterations/u.rate.length));var v=u.network.worker();v.onmessage=function(e){u.network.optimized.ownership(e.data.memoryBuffer),"propagate"==e.data.action&&(g>=l?(g=0,h++,c/=t.length,i&&(u.schedule&&u.schedule.every&&h%u.schedule.every==0?f=u.schedule["do"]({error:c,iterations:h,rate:a}):i.log&&h%i.log==0&&console.log("iterations",h,"error",c),i.shuffle&&r(t)),!f&&h<u.iterations&&c>u.error?o(t[g].input):n({error:c,iterations:h,time:Date.now()-d}),c=0):o(t[g].input)),"activate"==e.data.action&&(c+=p(t[g].output,e.data.output),s(t[g].output),g++)};var g=0,h=0;o(t[g].input)},XOR:function(t){if(2!=this.network.inputs()||1!=this.network.outputs())throw new Error("Incompatible network (2 inputs, 1 output)");var n={iterations:1e5,log:!1,shuffle:!0,cost:e.cost.MSE};if(t)for(var i in t)n[i]=t[i];return this.train([{input:[0,0],output:[0]},{input:[1,0],output:[1]},{input:[0,1],output:[1]},{input:[1,1],output:[0]}],n)},DSR:function(t){t=t||{};for(var n=t.targets||[2,4,7,8],r=t.distractors||[3,5,6,9],o=t.prompts||[0,1],s=t.length||24,a=t.success||.95,u=t.iterations||1e5,c=t.rate||.1,h=t.log||0,l=t.schedule||{},f=t.cost||this.cost||e.cost.CROSS_ENTROPY,p=correct=i=j=success=0,d=1,v=n.length+r.length+o.length,g=function(t,e){var n=Math.random()*t|0,i=!1;for(var r in e)n==e[r]&&(i=!0);return i?g(t,e):n},y=function(t,e){for(var n in t)if(Math.round(t[n])!=e[n])return!1;return!0},m=Date.now();u>p&&(success<a||p%1e3!=0);){var w=[],b=s-o.length;for(i=0;i<b;i++){var x=Math.random()*r.length|0;w.push(r[x])}var T=[],I=[];for(i=0;i<o.length;i++)T.push(Math.random()*n.length|0),I.push(g(b,I));for(I=I.sort(),i=0;i<o.length;i++)w[I[i]]=n[T[i]],w.push(o[i]);var M=distractorsCorrect=0;for(d=0,i=0;i<s;i++){var z=[];for(j=0;j<v;j++)z[j]=0;z[w[i]]=1;var _=[];for(j=0;j<n.length;j++)_[j]=0;if(i>=b){var O=i-b;_[T[O]]=1}var D=this.network.activate(z);y(D,_)?i<b?distractorsCorrect++:M++:this.network.propagate(c,_),d+=f(_,D),distractorsCorrect+M==s&&correct++}p%1e3==0&&(correct=0),p++;var E=p%1e3;E=0==E?1e3:E,success=correct/E,d/=s,h&&p%h==0&&console.log("iterations:",p," success:",success," correct:",correct," time:",Date.now()-m," error:",d),l["do"]&&l.every&&p%l.every==0&&l["do"]({iterations:p,success:success,error:d,time:Date.now()-m,correct:correct})}return{iterations:p,success:success,error:d,time:Date.now()-m}},ERG:function(t){t=t||{};var n=t.iterations||15e4,i=t.error||.05,r=t.rate||.1,o=t.log||500,s=t.cost||this.cost||e.cost.CROSS_ENTROPY,a=function(){this.paths=[]};a.prototype={connect:function(t,e){return this.paths.push({node:t,value:e}),this},any:function(){if(0==this.paths.length)return!1;var t=Math.random()*this.paths.length|0;return this.paths[t]},test:function(t){for(var e in this.paths)if(this.paths[e].value==t)return this.paths[e];return!1}};for(var u=function(){var t=new a,e=(new a).connect(t,"E"),n=(new a).connect(e,"S"),i=(new a).connect(e,"V").connect(n,"P"),r=(new a).connect(n,"X");r.connect(r,"S");var o=(new a).connect(i,"V");o.connect(o,"T"),n.connect(o,"X");var s=(new a).connect(r,"T").connect(o,"P"),u=(new a).connect(s,"B");return{input:u,output:t}},c=function(){var t=u(),e=u(),n=new a,i=(new a).connect(n,"E");t.output.connect(i,"T"),e.output.connect(i,"P");var r=(new a).connect(t.input,"P").connect(e.input,"T"),o=(new a).connect(r,"B");return{input:o,output:n}},h=function(){for(var t=c().input,e=t.any(),n="";e;)n+=e.value,e=e.node.any();return n},l=function(t){for(var e=c().input,n=0,i=t.charAt(n);n<t.length;){var r=e.test(i);if(!r)return!1;e=r.node,i=t.charAt(++n)}return!0},f=function(t,e){var n=0,i=-1,r=0,o=-1;for(var s in t)t[s]>n&&(n=t[s],i=s),e[s]>r&&(r=e[s],o=s);return i!=o},p=0,d=1,v={B:0,P:1,T:2,X:3,S:4,E:5},g=Date.now();n>p&&d>i;){var y=0;d=0;for(var m=h(),w=m.charAt(y),b=m.charAt(y+1);y<m.length-1;){for(var x=[],T=[],I=0;6>I;I++)x[I]=0,T[I]=0;x[v[w]]=1,T[v[b]]=1;var M=this.network.activate(x);f(M,T)&&this.network.propagate(r,T),w=m.charAt(++y),b=m.charAt(y+1),d+=s(T,M)}d/=m.length,p++,p%o==0&&console.log("iterations:",p," time:",Date.now()-g," error:",d)}return{iterations:p,error:d,time:Date.now()-g,test:l,generate:h}},timingTask:function(t){function n(t,e){for(var n=t+e,i=0,r=[],o=0;n>o;o++)r.push({input:[0,0],output:[0]});for(;n-20>i;){var s=Math.round(20*Math.random());r[i].input[0]=1;for(var a=i;i+s>=a;a++)r[a].input[1]=s/20,r[a].output[0]=.5;i+=s,s=Math.round(20*Math.random());for(var u=i+1;i+s>=u&&n>u;u++)r[u].input[1]=r[i].input[1];i+=s}for(var c=[],h=[],l=0;n>l;l++)(t>l?c:h).push(r[l]);return{train:c,test:h}}if(2!=this.network.inputs()||1!=this.network.outputs())throw new Error("Invalid Network: must have 2 inputs and one output");if("undefined"==typeof t)var t={};var i=t.iterations||200,r=t.error||.005,o=t.rate||[.03,.02],s=t.log===!1?!1:t.log||10,a=t.cost||this.cost||e.cost.MSE,u=t.trainSamples||7e3,c=t.trainSamples||1e3,h=n(u,c),l=this.train(h.train,{rate:o,log:s,iterations:i,error:r,cost:a});return{train:l,test:this.test(h.test)}}},e.cost={CROSS_ENTROPY:function(t,e){var n=0;for(var i in e)n-=t[i]*Math.log(e[i]+1e-15)+(1-t[i])*Math.log(1+1e-15-e[i]);return n},MSE:function(t,e){var n=0;for(var i in e)n+=Math.pow(t[i]-e[i],2);return n/e.length},BINARY:function(t,e){var n=0;for(var i in e)n+=Math.round(2*t[i])!=Math.round(2*e[i]);return n}}}).call(e,n(1)(t))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.generateCrossovers=e.buildGeneration=e.nBest=e.energyBounds=void 0;var r=n(2),o=(i(r),n(6)),s=(i(o),n(7)),a=i(s),u=function(t){var e=t.reduce(function(t,e){return Math.max(t,e.energy)},0),n=t.reduce(function(t,e){return Math.min(t,e.energy)},1/0);return{max:e,min:n}},c=function(t,e){t.sort(function(t,e){return e.energy-t.energy});var n=t.map(function(t,n){var i=t.energy;return n===e&&(i+=">Cutoff>"),i});return console.log(n.join("|")),t.slice(0,e)},h=function(t,e,n){var i=l(t),r=i.map(function(t){var n=new a["default"](e());return n.setGenome(t),n});return r},l=function(t){var e=t.map(function(e){return p(e.getGenome(),t[0].getGenome(),.5*Math.random())});return e},f=function(t,e){var n=t.map(function(t){if(void 0===t)return 0;var n=t+(Math.random()*e-e/2);return n=Math.max(n,-.999999),n=Math.min(n,.999999)});return n},p=function(t,e,n){for(var i=t.length,r=Math.random()*i|0,o=[new Array(i),new Array(i)],s=0;i>s;s++){var a=0,u=1;if(r>s);o[a][s]=t[s],o[u][s]=t[s]}return f(o[0],n)};e.energyBounds=u,e.nBest=c,e.buildGeneration=h,e.generateCrossovers=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.render=void 0;var r=n(14),o=i(r),s=function(t,e,n,i,r){for(var s=r.max,a=r.min,u=t.canvas,c=(u.height,u.width,0);c<i.maxTiles.x;c+=1)for(var h=0;h<i.maxTiles.y;h+=1){var l=i.tiles[c][h];void 0!==l?t.fillStyle="hsla("+(180+10*l.length)+",30%,30%,0.2)":t.fillStyle="hsla(180,30%,30%,0.2)",t.fillRect(c*i.tileSize,h*i.tileSize,i.tileSize,i.tileSize)}var f=Math.PI/1.6;t.lineWidth=.2,t.strokeStyle="#daa",t.fillStyle="#afa",n.forEach(function(e){t.beginPath(),t.arc(0|e.p.x,0|e.p.y,2+.5*Math.random(),0,2*Math.PI),t.stroke()}),t.lineWidth=.7,t.strokeStyle="#aad",e.forEach(function(e){t.beginPath();var n=(e.energy-a)/(s-a+.1);t.fillStyle=o["default"].toHex(0|e.hue,99*Math.max(n,.1)|0,60),t.arc(0|e.p.x,0|e.p.y,e.radius,e.angle-f,e.angle+f),t.stroke(),t.fill()})};e.render=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){var e=this;n(this,t),this.speedSlider=document.getElementById("speed"),this.generation=document.getElementById("generation"),this.speed=this.getSpeed(),this.speedSlider.addEventListener("input",function(){e.speed=e.getSpeed()})}return i(t,[{key:"setGeneration",value:function(t){this.generation.innerHTML=t.toString()}},{key:"getSpeed",value:function(){return this.shapeSpeed(this.speedSlider.valueAsNumber)}},{key:"shapeSpeed",value:function(t){return(0|Math.pow(t/10,1.5))+1}}]),t}();e.ui=r,e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),a=i(s),u=n(6),c=(i(u),function(){function t(e,n,i){r(this,t),this.worldsize=new a["default"](e,n),this.tileSize=i,this.maxTiles=new a["default"](this.worldsize.x/i|0,this.worldsize.y/i|0),this.tiles=this.initializeMap()}return o(t,[{key:"initializeMap",value:function(){this.tiles=new Array(this.maxTiles.x);for(var t=0;t<this.maxTiles.x;t+=1)this.tiles[t]=new Array(this.maxTiles.y)}},{key:"hashLoc",value:function(t){var e=t.x/this.tileSize|0,n=t.y/this.tileSize|0;return new a["default"](e,n)}},{key:"getBin",value:function(t,e){var n=this.hashLoc(t);e===!0&&(n=t);var i=this.tiles[n.x][n.y];return void 0!==i?i:[]}},{key:"getNeighbors",value:function(t){for(var e=this.hashLoc(t),n=[],i=-1;1>=i;i++)for(var r=-1;1>=r;r++){var o=e.copy().add(new a["default"](i,r)).wrap(this.maxTiles),s=this.getBin(o,!0);n=n.concat(s)}return n}},{key:"buildMap",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value,a=this.hashLoc(s.p);void 0===this.tiles[a.x][a.y]?this.tiles[a.x][a.y]=[s]:this.tiles[a.x][a.y].push(s)}}catch(u){n=!0,i=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw i}}}}]),t}());e.World=c,e["default"]=c},function(t,e,n){var i,r;(function(t){(function(){var o,s,a,u,c,h,l,f,p,d,v,g,y,m,w,b,x,T,I;g={R:[3.2409699419045213,-1.5373831775700935,-.4986107602930033],G:[-.9692436362808798,1.8759675015077206,.04155505740717561],B:[.05563007969699361,-.20397695888897657,1.0569715142428786]},y={X:[.4123907992659595,.35758433938387796,.1804807884018343],Y:[.21263900587151036,.7151686787677559,.07219231536073371],Z:[.01933081871559185,.11919477979462599,.9505321522496606]},b=.19783000664283681,x=.468319994938791,d=903.2962962962963,h=.008856451679035631,f=function(t){var e,n,i,r,o,s,a,u,c,l,f,p,v,y,m,w,b,x;for(y=Math.pow(t+16,3)/1560896,m=y>h?y:t/d,v=[],l=["R","G","B"],i=0,o=l.length;o>i;i++)for(n=l[i],f=g[n],a=f[0],u=f[1],c=f[2],p=[0,1],r=0,s=p.length;s>r;r++)w=p[r],b=(284517*a-94839*c)*m,x=(838422*c+769860*u+731718*a)*t*m-769860*w*t,e=(632260*c-126452*u)*m+126452*w,v.push([b/e,x/e]);return v},p=function(t,e){return(t[1]-e[1])/(e[0]-t[0])},u=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},v=function(t,e){var n,i,r;return r=e[0],n=e[1],i=n/(Math.sin(t)-r*Math.cos(t)),0>i?null:i},w=function(t){var e,n,i,r,o,s,a,c;for(r=[],s=f(t),n=0,i=s.length;i>n;n++)a=s[n],o=a[0],e=a[1],c=p([o,e],[-1/o,0]),r.push(u([c,e+c*o]));return Math.min.apply(Math,r)},m=function(t,e){var n,i,r,o,s,a,u;for(n=e/360*Math.PI*2,s=[],u=f(t),i=0,o=u.length;o>i;i++)a=u[i],r=v(n,a),null!==r&&s.push(r);return Math.min.apply(Math,s)},c=function(t,e){var n,i,r,o;for(o=0,n=i=0,r=t.length-1;r>=0?r>=i:i>=r;n=r>=0?++i:--i)o+=t[n]*e[n];return o},l=function(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055},I=function(t){var e;return e=.055,t>.04045?Math.pow((t+e)/(1+e),2.4):t/12.92},a={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}},a.xyz.rgb=function(t){var e,n,i;return i=l(c(g.R,t)),n=l(c(g.G,t)),e=l(c(g.B,t)),[i,n,e]},a.rgb.xyz=function(t){var e,n,i,r,o,s,a;return i=t[0],n=t[1],e=t[2],a=[I(i),I(n),I(e)],r=c(y.X,a),o=c(y.Y,a),s=c(y.Z,a),[r,o,s]},s=function(t){return h>=t?t*d:116*Math.pow(t,1/3)-16},o=function(t){return 8>=t?t/d:Math.pow((t+16)/116,3)},a.xyz.luv=function(t){var e,n,i,r,o,a,u,c;return r=t[0],o=t[1],a=t[2],0===o?[0,0,0]:(e=s(o),u=4*r/(r+15*o+3*a),c=9*o/(r+15*o+3*a),n=13*e*(u-b),i=13*e*(c-x),[e,n,i])},a.luv.xyz=function(t){var e,n,i,r,s,a,u,c;return e=t[0],n=t[1],i=t[2],0===e?[0,0,0]:(u=n/(13*e)+b,c=i/(13*e)+x,s=o(e),r=0-9*s*u/((u-4)*c-u*c),a=(9*s-15*c*s-c*r)/(3*c),[r,s,a])},a.luv.lch=function(t){var e,n,i,r,o,s;return r=t[0],o=t[1],s=t[2],e=Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),1e-8>e?n=0:(i=Math.atan2(s,o),n=360*i/2/Math.PI,0>n&&(n=360+n)),[r,e,n]},a.lch.luv=function(t){var e,n,i,r,o,s;return r=t[0],e=t[1],n=t[2],i=n/360*2*Math.PI,o=Math.cos(i)*e,s=Math.sin(i)*e,[r,o,s]},a.husl.lch=function(t){var e,n,i,r,o;return n=t[0],r=t[1],i=t[2],i>99.9999999||1e-8>i?e=0:(o=m(i,n),e=o/100*r),[i,e,n]},a.lch.husl=function(t){var e,n,i,r,o;return i=t[0],e=t[1],n=t[2],i>99.9999999||1e-8>i?r=0:(o=m(i,n),r=e/o*100),[n,r,i]},a.huslp.lch=function(t){var e,n,i,r,o;return n=t[0],r=t[1],i=t[2],i>99.9999999||1e-8>i?e=0:(o=w(i),e=o/100*r),[i,e,n]},a.lch.huslp=function(t){var e,n,i,r,o;return i=t[0],e=t[1],n=t[2],i>99.9999999||1e-8>i?r=0:(o=w(i),r=e/o*100),[n,r,i]},a.rgb.hex=function(t){var e,n,i,r;for(n="#",i=0,r=t.length;r>i;i++){if(e=t[i],e=Math.round(1e6*e)/1e6,0>e||e>1)throw new Error("Illegal rgb value: "+e);e=Math.round(255*e).toString(16),1===e.length&&(e="0"+e),n+=e}return n},a.hex.rgb=function(t){var e,n,i,r,o,s,a,u;for("#"===t.charAt(0)&&(t=t.substring(1,7)),s=t.substring(0,2),n=t.substring(2,4),e=t.substring(4,6),a=[s,n,e],u=[],i=0,r=a.length;r>i;i++)o=a[i],u.push(parseInt(o,16)/255);return u},a.lch.rgb=function(t){return a.xyz.rgb(a.luv.xyz(a.lch.luv(t)))},a.rgb.lch=function(t){return a.luv.lch(a.xyz.luv(a.rgb.xyz(t)))},a.husl.rgb=function(t){return a.lch.rgb(a.husl.lch(t))},a.rgb.husl=function(t){return a.lch.husl(a.rgb.lch(t))},a.huslp.rgb=function(t){return a.lch.rgb(a.huslp.lch(t))},a.rgb.huslp=function(t){return a.lch.huslp(a.rgb.lch(t))},T={},T.fromRGB=function(t,e,n){return a.rgb.husl([t,e,n])},T.fromHex=function(t){return a.rgb.husl(a.hex.rgb(t))},T.toRGB=function(t,e,n){return a.husl.rgb([t,e,n])},T.toHex=function(t,e,n){return a.rgb.hex(a.husl.rgb([t,e,n]))},T.p={},T.p.toRGB=function(t,e,n){return a.xyz.rgb(a.luv.xyz(a.lch.luv(a.huslp.lch([t,e,n]))))},T.p.toHex=function(t,e,n){return a.rgb.hex(a.xyz.rgb(a.luv.xyz(a.lch.luv(a.huslp.lch([t,e,n])))))},T.p.fromRGB=function(t,e,n){return a.lch.huslp(a.luv.lch(a.xyz.luv(a.rgb.xyz([t,e,n]))))},T.p.fromHex=function(t){return a.lch.huslp(a.luv.lch(a.xyz.luv(a.rgb.xyz(a.hex.rgb(t)))))},T._conv=a,T._getBounds=f,T._maxChromaForLH=m,T._maxSafeChromaForL=w,"undefined"!=typeof t&&null!==t||"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof requirejs&&null!==requirejs||(this.HUSL=T),"undefined"!=typeof t&&null!==t&&(t.exports=T),"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.husl=T),"undefined"!=typeof requirejs&&null!==requirejs&&null!==n(16)&&(i=T,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)))}).call(this)}).call(e,n(1)(t))},function(t,e,n){(function(t){var e=n(3),i=n(4),r=n(9),o={Perceptron:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=t.shift(),i=t.pop(),o=t,s=new e(n),a=[],u=new e(i),c=s;for(level in o){var h=o[level],l=new e(h);a.push(l),c.project(l),c=l}c.project(u),this.set({input:s,hidden:a,output:u}),this.trainer=new r(this)},LSTM:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=t.pop(),i={peepholes:e.connectionType.ALL_TO_ALL,hiddenToHidden:!1,outputToHidden:!1,outputToGates:!1,inputToOutput:!0};if("number"!=typeof n){var o=t.pop();n.hasOwnProperty("peepholes")&&(i.peepholes=n.peepholes),n.hasOwnProperty("hiddenToHidden")&&(i.hiddenToHidden=n.hiddenToHidden),n.hasOwnProperty("outputToHidden")&&(i.outputToHidden=n.outputToHidden),n.hasOwnProperty("outputToGates")&&(i.outputToGates=n.outputToGates),n.hasOwnProperty("inputToOutput")&&(i.inputToOutput=n.inputToOutput)}else var o=n;var s=t.shift(),a=t,u=new e(s),c=[],h=new e(o),l=null;for(var f in a){var p=a[f],d=new e(p).set({bias:1}),v=new e(p).set({bias:1}),g=new e(p),y=new e(p).set({bias:1});c.push(d),c.push(v),c.push(g),c.push(y);var m=u.project(g);if(u.project(d),u.project(v),u.project(y),null!=l){var w=l.project(g);l.project(d),l.project(v),l.project(y)}var b=g.project(h),x=g.project(g);i.hiddenToHidden&&g.project(g,e.connectionType.ALL_TO_ELSE),i.outputToHidden&&h.project(g),i.outputToGates&&(h.project(d),h.project(y),h.project(v)),g.project(d,i.peepholes),g.project(v,i.peepholes),g.project(y,i.peepholes),d.gate(m,e.gateType.INPUT),v.gate(x,e.gateType.ONE_TO_ONE),y.gate(b,e.gateType.OUTPUT),null!=l&&d.gate(w,e.gateType.INPUT),l=g}i.inputToOutput&&u.project(h),this.set({input:u,hidden:c,output:h}),this.trainer=new r(this)},Liquid:function(t,n,i,o,s){for(var a=new e(t),u=new e(n),c=new e(i),h=u.neurons(),l=[],f=0;o>f;f++){var p=Math.random()*h.length|0,d=Math.random()*h.length|0,v=h[p].project(h[d]);l.push(v)}for(var g=0;s>g;g++){var y=Math.random()*h.length|0,v=Math.random()*l.length|0;h[y].gate(l[v])}a.project(u),u.project(c),this.set({input:a,hidden:[u],output:c}),this.trainer=new r(this)},Hopfield:function(t){var n=new e(t),i=new e(t);n.project(i,e.connectionType.ALL_TO_ALL),this.set({input:n,hidden:[],output:i});var s=new r(this),a=o.Hopfield.prototype;a.learn=a.learn||function(t){var e=[];for(var n in t)e.push({input:t[n],output:t[n]});return s.train(e,{iterations:5e5,error:5e-5,rate:1})},a.feed=a.feed||function(t){var e=this.activate(t),t=[];for(var n in e)t[n]=e[n]>.5?1:0;return t}}};for(var s in o)o[s].prototype=new i,o[s].prototype.constructor=o[s];t&&(t.exports=o)}).call(e,n(1)(t))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}}]);